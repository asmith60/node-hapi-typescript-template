steps:
- id: checkout
  name: 'gcr.io/cloud-builders/git'
  args: ['clone', 'https://github.com/asmith60/node-hapi-typescript-template.git']
- id: install
  name: 'node:10.9-alpine'
  args: ['npm', 'install']
- id: build
  name: 'node:10.9-alpine'
  args: ['npm', 'run', 'build']
- id: unit-test
  name: 'node:10.9-alpine'
  args: ['npm', 'run', 'test:junit']
  waitFor: ['build']
- id: lint-test
  name: 'node:10.9-alpine'
  args: ['npm', 'run', 'test:lint']
  waitFor: ['build']
- id: security-test
  name: 'node:10.9-alpine'
  args: ['npm', 'run', 'test:security']
  waitFor: ['build']
